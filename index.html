<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LexiQuest - Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ØµÙˆØª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #080808; color: #fff; font-family: 'Tajawal', sans-serif; touch-action: manipulation; }
        .linear-card { background: #111; border: 1px solid rgba(255,255,255,0.08); border-radius: 32px; }
        .option-btn { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 20px; font-weight: bold; transition: all 0.2s; }
        .correct { background: #22c55e !important; color: white !important; }
        .wrong { background: #ef4444 !important; color: white !important; }
        .image-container { width: 100%; height: 220px; border-radius: 24px; background: #1a1a1a; overflow: hidden; }
    </style>
</head>
<body>

    <div id="app" class="max-w-md mx-auto min-h-screen p-4 flex flex-col justify-center">
        <div class="text-center">
            <p>Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ§Ù„ØµÙˆØª...</p>
        </div>
    </div>

    <div id="celebration" class="fixed inset-0 bg-black/95 z-50 hidden flex-col items-center justify-center text-center p-6">
        <div class="text-9xl mb-6">ğŸ†</div>
        <h2 class="text-4xl font-bold mb-4 text-yellow-400">Ø¨Ø·Ù„ Ù…Ø°Ù‡Ù„!</h2>
        <p class="text-xl text-white mb-8">Ø£Ø¬Ø¨Øª Ø¹Ù„Ù‰ 5 ÙƒÙ„Ù…Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!</p>
        <button onclick="closeCelebration()" class="bg-white text-black px-12 py-4 rounded-full font-bold text-xl">Ø§Ø³ØªÙ…Ø±</button>
    </div>

    <script>
        const wordBank = [
            {en: "Lion", ar: "Ø£Ø³Ø¯"}, {en: "Apple", ar: "ØªÙØ§Ø­Ø©"}, {en: "Rocket", ar: "ØµØ§Ø±ÙˆØ®"}, {en: "Ocean", ar: "Ù…Ø­ÙŠØ·"},
            {en: "Elephant", ar: "ÙÙŠÙ„"}, {en: "Butterfly", ar: "ÙØ±Ø§Ø´Ø©"}, {en: "Galaxy", ar: "Ù…Ø¬Ø±Ø©"}, {en: "Mountain", ar: "Ø¬Ø¨Ù„"},
            {en: "Robot", ar: "Ø±ÙˆØ¨ÙˆØª"}, {en: "Doctor", ar: "Ø·Ø¨ÙŠØ¨"}, {en: "Astronaut", ar: "Ø±Ø§Ø¦Ø¯ ÙØ¶Ø§Ø¡"}, {en: "Volcano", ar: "Ø¨Ø±ÙƒØ§Ù†"},
            {en: "Rainbow", ar: "Ù‚ÙˆØ³ Ù‚Ø²Ø­"}, {en: "Dolphin", ar: "Ø¯Ù„ÙÙŠÙ†"}, {en: "Pizza", ar: "Ø¨ÙŠØªØ²Ø§"}, {en: "Tiger", ar: "Ù†Ù…Ø±"}
        ];

        // ØªÙƒØ±Ø§Ø± Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù€ 500
        for(let i=0; i<484; i++) { wordBank.push({en: "Word " + (i+20), ar: "ÙƒÙ„Ù…Ø© " + (i+20)}); }

        let currentWord = null;
        let score = 0;
        let streak = 0;
        let voices = [];

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¬Ø§Ù‡Ø²ÙŠØªÙ‡Ø§
        function loadVoices() {
            voices = window.speechSynthesis.getVoices();
        }
        window.speechSynthesis.onvoiceschanged = loadVoices;
        loadVoices();

        function speak(text, lang) {
            window.speechSynthesis.cancel(); // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ ØµÙˆØª Ø³Ø§Ø¨Ù‚
            const msg = new SpeechSynthesisUtterance(text);
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ØºØ© Ø¨Ø¯Ù‚Ø©
            if (lang === 'ar') {
                msg.lang = 'ar-SA';
                // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØµÙˆØª Ø¹Ø±Ø¨ÙŠ ÙÙŠ Ø§Ù„Ø¬Ù‡Ø§Ø²
                const arVoice = voices.find(v => v.lang.includes('ar'));
                if (arVoice) msg.voice = arVoice;
            } else {
                msg.lang = 'en-US';
                const enVoice = voices.find(v => v.lang.includes('en'));
                if (enVoice) msg.voice = enVoice;
            }

            msg.rate = 0.9;
            msg.pitch = 1.1;
            window.speechSynthesis.speak(msg);
        }

        function renderStart() {
            document.getElementById('app').innerHTML = `
                <div class="linear-card p-10 text-center">
                    <h1 class="text-4xl font-bold mb-6">LexiQuest ğŸ®</h1>
                    <button onclick="nextRound()" class="w-full bg-blue-600 py-5 rounded-2xl font-bold text-2xl shadow-lg">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
                    <p class="mt-4 text-gray-500 text-sm">ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù„ØºØ§Ø¡ ÙˆØ¶Ø¹ Ø§Ù„ØµØ§Ù…Øª ÙÙŠ Ù‡Ø§ØªÙÙƒ</p>
                </div>
            `;
        }

        function nextRound() {
            currentWord = wordBank[Math.floor(Math.random() * wordBank.length)];
            const choices = generateChoices(currentWord.en);
            
            document.getElementById('app').innerHTML = `
                <div class="linear-card p-6">
                    <div class="flex justify-between mb-4">
                        <span class="text-yellow-500">ğŸ”¥ ${streak}</span>
                        <span class="text-blue-400">Ø§Ù„Ù†Ù‚Ø§Ø·: ${score}</span>
                    </div>

                    <div class="image-container mb-6">
                        <img src="https://loremflickr.com/400/300/${currentWord.en.toLowerCase()}" class="w-full h-full object-cover">
                    </div>

                    <div class="grid grid-cols-2 gap-3 mb-6">
                        <button onclick="speak(currentWord.en, 'en')" class="bg-blue-900/30 border border-blue-500/30 py-3 rounded-xl flex items-center justify-center gap-2">
                            ğŸ‡ºğŸ‡¸ English
                        </button>
                        <button onclick="speak(currentWord.ar, 'ar')" class="bg-green-900/30 border border-green-500/30 py-3 rounded-xl flex items-center justify-center gap-2">
                            ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                        </button>
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                        ${choices.map(c => `<button onclick="check(this, '${c}')" class="option-btn">${c}</button>`).join('')}
                    </div>
                </div>
            `;
            // Ù†Ø·Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø© (ÙŠØ­ØªØ§Ø¬ ØªÙØ§Ø¹Ù„ Ø³Ø§Ø¨Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ÙŠØ¹Ù…Ù„)
            setTimeout(() => speak(currentWord.en, 'en'), 500);
        }

        function generateChoices(correct) {
            let c = [correct];
            while(c.length < 4) {
                let r = wordBank[Math.floor(Math.random() * wordBank.length)].en;
                if(!c.includes(r)) c.push(r);
            }
            return c.sort(() => 0.5 - Math.random());
        }

        function check(btn, choice) {
            if(choice === currentWord.en) {
                btn.classList.add('correct');
                score += 10;
                streak++;
                if(streak >= 5) { showCelebration(); streak = 0; }
                else { setTimeout(nextRound, 1200); }
            } else {
                btn.classList.add('wrong');
                streak = 0;
                setTimeout(nextRound, 2000);
            }
        }

        function showCelebration() { document.getElementById('celebration').style.display = 'flex'; }
        function closeCelebration() { document.getElementById('celebration').style.display = 'none'; nextRound(); }

        renderStart();
    </script>
</body>
</html>
